knative-serving:
  configObservability:
    data:
      metrics.backend-destination: prometheus
      metrics.request-metrics-backend-destination: prometheus
      logging.request-log-template: '{{ `{"httpRequest": {"requestMethod": "{{.Request.Method}}", "requestUrl": "{{js .Request.RequestURI}}", "requestSize": "{{.Request.ContentLength}}", "status": {{.Response.Code}}, "responseSize": "{{.Response.Size}}", "userAgent": "{{js .Request.UserAgent}}", "remoteIp": "{{js .Request.RemoteAddr}}", "serverIp": "{{.Revision.PodIP}}", "referer": "{{js .Request.Referer}}", "latency": "{{.Response.Latency}}s", "protocol": "{{.Request.Proto}}"}, "traceId": "{{index .Request.Header "X-B3-Traceid"}}"}` }}'
      logging.enable-request-log: "true"
      logging.enable-probe-request-log: "true"
      profiling.enable: "true"
      # metrics.opencensus-address: plural-otel-collector.monitoring.svc.cluster.local:55678
  configNetwork:
    data:
      domain-template: '{{ `{{.Name}}-{{.Namespace}}.{{.Domain}}` }}'
      #TODO: figure out how Redirect is supposed to work
      http-protocol: "Enabled"
      default-external-scheme: "https"
      # external-domain-tls: Enabled
      # namespace-wildcard-cert-selector: |
      #   matchExpressions:
      #   - key: "networking.knative.dev/disableWildcardCert"
      #     operator: "NotIn"
      #     values: ["true"]
  configLogging:
    data:
      loglevel.controller: info
      loglevel.autoscaler: info
      loglevel.queueproxy: debug
      loglevel.webhook: info
      loglevel.activator: debug
      loglevel.hpaautoscaler: info
      loglevel.net-certmanager-controller: info
      loglevel.net-istio-controller: debug
      loglevel.net-nscert-controller: info
  configDeployment:
    data:
      progress-deadline: 600s
  net-istio:
    configIstio:
      data:
        gateway.kubeflow.kubeflow-gateway: istio-ingressgateway.istio.svc.cluster.local
        local-gateway.knative.knative-local-gateway: "knative-local-gateway.istio.svc.cluster.local"

  net-certmanager:
    certmanager:
      namespace: bootstrap
    enabled: true
    configCertmanager:
      configMap:
        create: true
      data:
        issuerRef: |
          kind: ClusterIssuer
          name: letsencrypt-prod

kubeflow:
  enabled: false
