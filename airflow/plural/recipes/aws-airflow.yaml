name: aws-airflow
description: Installs airflow on an EKS cluster
provider: AWS
oidcSettings:
  authMethod: POST
  uriFormat: https://{domain}/oauth-authorized/plural
  domainKey: hostname
dependencies:
  - repo: bootstrap
    name: aws-k8s
  - repo: ingress-nginx
    name: ingress-nginx-aws
  - repo: postgres
    name: aws-postgres
sections:
  - name: airflow
    items:
      - type: TERRAFORM
        name: aws
        configuration:
        - name: airflowBucket
          type: BUCKET
          default: airflow
          documentation: Arbitrary bucket name to store the logs in
      - type: HELM
        name: airflow
        configuration:
          - name: hostname
            documentation: Fully Qualified Domain Name to use for your airflow installation, eg airflow.topleveldomain.com if topleveldomain.com is the domain you inputed for dns_domain above.
            type: DOMAIN
          - name: dagRepo
            type: STRING
            documentation: Arbitrary name for the repo your dags will be stored in eg plural-airflow-dag
          - name: branchName
            type: STRING
            documentation: The branch to sync from
          - name: adminUsername
            type: STRING
            documentation: The airflow username for the admin
          - name: adminFirst
            type: STRING
            documentation: The first name for the admin
          - name: adminLast
            type: STRING
            documentation: The last name for the admin
          - name: adminEmail
            type: STRING
            documentation: The email for the admin
