{{/*
  DEPRECATED: Only for backwards compatibility with old version when external postgres is used
  and "pgClient.external.password" is set. Credentials secret should be now be created by the postgres operator.
*/}}
{{- if and (.Values.hasura.pgClient).external.password (not .Values.postgres.enabled) }}
apiVersion: v1
kind: Secret
metadata:
  name: hasura.plural-hasura.credentials.postgresql.acid.zalan.do
  labels:
  {{- include "hasura.labels" . | nindent 4 }}
stringData:
  username: {{ .Values.hasura.pgClient.external.username }}
  password: {{ .Values.hasura.pgClient.external.password }}
{{- end }}
